import{r as t,h as i,e}from"./p-d6a83339.js";import{a as s}from"./p-1b31bc77.js";import{T as h}from"./p-f184f1b9.js";const l=["input","select","textarea"],o=class{constructor(i){t(this,i),this.type="TEXT",this.hidden=!1,this.required=!1,this.hint="",this.placeholder="",this.choices=[],this.fieldProps={},this.touched=!1,this.error="",this.shouldRender=!0,this.disabled=!1,this.hasSlot=!1}renderControl(){var t,e,s,l,o,r,n,a,d,c,b,v,u,p,f,O,m,x,j,g,k,w,E,T,y,L;if(this.hasSlot)return null;if(!this.name)return null;let q;switch(this.type){case"TEXT":case"NUMBER":case"DECIMAL":case"EMAIL":case"TEL":case"URL":{const s="DECIMAL"===this.type?"number":null===(t=this.type)||void 0===t?void 0:t.toLowerCase(),l=Object.assign(Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled,type:s}),null===(e=this.controlProps)||void 0===e?void 0:e.inputProps(this.name,s)),{state:this.touched&&this.error?"error":"normal","hint-text":this.hint,"error-text":h.t(this.error,{field:this.label||this.name})});q=i("fw-input",Object.assign({},l,{ref:t=>this.crayonsControlRef=t}));break}case"PARAGRAPH":{const t=Object.assign(Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled}),null===(s=this.controlProps)||void 0===s?void 0:s.inputProps(this.name,null===(l=this.type)||void 0===l?void 0:l.toLowerCase())),{state:this.touched&&this.error?"error":"normal","hint-text":this.hint,"error-text":h.t(this.error,{field:this.label||this.name})});q=i("fw-textarea",Object.assign({},t,{ref:t=>this.crayonsControlRef=t}))}break;case"DATE":{const t=Object.assign(Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled}),null===(o=this.controlProps)||void 0===o?void 0:o.inputProps(this.name,null===(r=this.type)||void 0===r?void 0:r.toLowerCase())),{state:this.touched&&this.error?"error":"normal","hint-text":this.hint,"error-text":h.t(this.error,{field:this.label||this.name})});q=i("fw-datepicker",Object.assign({},t,{ref:t=>this.crayonsControlRef=t}))}break;case"DATE_TIME":{const t=Object.assign(Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled}),null===(n=this.controlProps)||void 0===n?void 0:n.inputProps(this.name,null===(a=this.type)||void 0===a?void 0:a.toLowerCase())),{state:this.touched&&this.error?"error":"normal","hint-text":this.hint,"error-text":h.t(this.error,{field:this.label||this.name}),showTimePicker:!0});q=i("fw-datepicker",Object.assign({},t,{ref:t=>this.crayonsControlRef=t}))}break;case"CHECKBOX":{const t=Object.assign(Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:"",required:this.required,disabled:this.disabled}),null===(d=this.controlProps)||void 0===d?void 0:d.checkboxProps(this.name,null===(c=this.type)||void 0===c?void 0:c.toLowerCase())),{state:this.touched&&this.error?"error":"normal","hint-text":this.hint,"error-text":h.t(this.error,{field:this.label||this.name})});q=i("fw-checkbox",Object.assign({},t,{ref:t=>this.crayonsControlRef=t}),this.label)}break;case"RADIO":{const t=null===(b=this.controlProps)||void 0===b?void 0:b.radioProps(this.name,null===(v=this.type)||void 0===v?void 0:v.toLowerCase()),e=Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,"allow-empty":!0,state:this.touched&&this.error?"error":"normal","hint-text":this.hint,"error-text":h.t(this.error,{field:this.label||this.name})}),t);q=i("fw-radio-group",Object.assign({},e,{ref:t=>this.crayonsControlRef=t}),null===(u=this.choices.sort(((t,i)=>{var e,s;return(null!==(e=null==t?void 0:t.position)&&void 0!==e?e:0)-(null!==(s=null==i?void 0:i.position)&&void 0!==s?s:0)})))||void 0===u?void 0:u.map((t=>i("fw-radio",{name:this.name,value:t[e.optionValuePath]||t.value,disabled:this.disabled,state:this.touched&&this.error?"error":"normal"},t[e.optionLabelPath]||t.value))))}break;case"DROPDOWN":case"MULTI_SELECT":{const t=null===(p=this.controlProps)||void 0===p?void 0:p.selectProps(this.name,null===(f=this.type)||void 0===f?void 0:f.toLowerCase()),e=null===(O=this.fieldProps)||void 0===O?void 0:O.field_options;let s=Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled,multiple:"MULTI_SELECT"===this.type,state:this.touched&&this.error?"error":"normal","hint-text":this.hint,"error-text":h.t(this.error,{field:this.label||this.name})});s=Object.assign(Object.assign(Object.assign({},s),t),{options:this.choices.sort(((t,i)=>{var e,s;return(null!==(e=null==t?void 0:t.position)&&void 0!==e?e:0)-(null!==(s=null==i?void 0:i.position)&&void 0!==s?s:0)}))}),(null==e?void 0:e.option_value_path)&&(s.optionValuePath=e.option_value_path),(null==e?void 0:e.option_label_path)&&(s.optionLabelPath=e.option_label_path),q=i("fw-select",Object.assign({},s,{ref:t=>this.crayonsControlRef=t}))}break;case"RELATIONSHIP":case"AUTO_COMPLETE":{const t=null===(m=this.controlProps)||void 0===m?void 0:m.selectProps(this.name,null===(x=this.type)||void 0===x?void 0:x.toLowerCase()),e=null===(j=this.fieldProps)||void 0===j?void 0:j.field_options,s=Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled,state:this.touched&&this.error?"error":"normal","hint-text":this.hint,"error-text":h.t(this.error,{field:this.label||this.name})});Array.isArray(null==t?void 0:t.value)&&"object"==typeof t.value[0]&&(s.selectedOptions=t.value),(null===(g=s.selectedOptions)||void 0===g?void 0:g.length)>0?null===(k=this.crayonsControlRef)||void 0===k||k.setSelectedOptions(s.selectedOptions):(null==t?void 0:t.value)||null===(w=this.crayonsControlRef)||void 0===w||w.setSelectedOptions([]),s.noDataText=h.t("search.startTyping"),(null==e?void 0:e.option_value_path)&&(s.optionValuePath=e.option_value_path),(null==e?void 0:e.option_label_path)&&(s.optionLabelPath=e.option_label_path),q=i("fw-select",Object.assign({},s,{ref:t=>this.crayonsControlRef=t}))}break;case"TIME":{const t=Object.assign(Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled}),null===(E=this.controlProps)||void 0===E?void 0:E.inputProps(this.name,null===(T=this.type)||void 0===T?void 0:T.toLowerCase())),{state:this.touched&&this.error?"error":"normal","hint-text":this.hint,"error-text":h.t(this.error,{field:this.label||this.name})});q=i("fw-timepicker",Object.assign({},t,{ref:t=>this.crayonsControlRef=t}))}break;case"FILES":{const t=!!(null===(y=this.fieldProps)||void 0===y?void 0:y.multiple),e=this.touched&&this.error?h.t(this.error,{field:this.label||this.name}):"",s=null===(L=this.controlProps)||void 0===L?void 0:L.fileProps(this.name,t),l=Object.assign(Object.assign({},this.fieldProps),{name:this.name,description:this.placeholder,required:this.required,isBatchUpload:!0,isFormLabel:!0,hintText:this.hint,errorText:e});(null==s?void 0:s.value)&&(l.initialFiles=s.value),q=i("fw-file-uploader-2",Object.assign({},l,{ref:t=>this.crayonsControlRef=t}))}}return q}componentWillUpdate(){this.setSlotElementValue()}async setFocus(){var t,i,e,s;this.hasSlot?null===(s=null===(e=this.slotElement)||void 0===e?void 0:e.focus)||void 0===s||s.call(e):await(null===(i=null===(t=this.crayonsControlRef)||void 0===t?void 0:t.setFocus)||void 0===i?void 0:i.call(t))}handleSlotChange(){var t;this.hasSlot=s(this.el),this.slotElement=null===(t=[...this.el.querySelectorAll("*")].filter((t=>{var i;return l.includes(null===(i=null==t?void 0:t.tagName)||void 0===i?void 0:i.toLowerCase())})))||void 0===t?void 0:t[0],this.setSlotElementValue()}setSlotElementValue(){this.slotElement&&setTimeout((()=>{var t,i;switch(this.type){case"CHECKBOX":this.slotElement.checked=null!==(t=this.value)&&void 0!==t&&t;break;default:this.slotElement.value=null!==(i=this.value)&&void 0!==i?i:""}}),100)}render(){return this.shouldRender&&i("div",{class:"form-control-container "+(this.hidden?"d-none":"")},this.renderControl(),this.hasSlot&&i("label",{htmlFor:this.name,class:{label:!0,required:this.required}},this.label),i("slot",{onSlotchange:()=>this.handleSlotChange()}),this.hasSlot&&!(this.touched&&this.error)&&i("div",{class:"hint",id:`hint-${this.name}`},this.hint),this.hasSlot&&this.touched&&this.error&&i("div",{class:"error",id:`error-${this.name}`},h.t(this.error,{field:this.label||this.name})))}get el(){return e(this)}};o.style=':host{font-family:var(--fw-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", roboto, oxygen, ubuntu, cantarell, "Open Sans", "Helvetica Neue", sans-serif);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}.error{color:#d72d30;font-weight:400;font-size:12px;line-height:20px;-webkit-padding-before:4px;padding-block-start:4px;-webkit-padding-start:2px;padding-inline-start:2px}label{font-size:12px;color:#475867;font-weight:600;-webkit-margin-after:4px;margin-block-end:4px;-webkit-padding-start:2px;padding-inline-start:2px;display:block}label.required::after{content:"*";position:relative;display:inline-block;inset-block-start:2px;font-size:14px;color:#d72d30;-webkit-padding-start:2px;padding-inline-start:2px;font-weight:700}.hint{font-weight:400;font-size:12px;color:#475867;line-height:20px;-webkit-padding-before:4px;padding-block-start:4px;-webkit-padding-start:2px;padding-inline-start:2px}.form-control-container{margin-inline:0em;margin-block:1em}.d-none{display:none}';export{o as fw_form_control}